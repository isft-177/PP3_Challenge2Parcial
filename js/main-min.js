const resultsCalc=document.querySelector("#results_calc"),showResult=document.querySelector(".show-result");let showOp=document.querySelector("#text");const onOffButton=document.getElementById("onOffBtn");let currentOperations=[],currentOperationsForView=[],equalsAvailable=!1;onOffButton.addEventListener("click",()=>{cleanValues(),showOp.classList.toggle("turn-on-off"),equalsAvailable=!equalsAvailable});const saveValueForANS=e=>{localStorage.setItem("ANS",e)},getANSValue=()=>localStorage.getItem("ANS"),cleanValues=()=>{resultsCalc.value="",showResult.textContent="",showOp.textContent="",currentOperations=[],currentOperationsForView=[]},addToDisplay=(e,t)=>{showOp.textContent+=t.trim(),e.value+=t.trim()},backspace=e=>{e.value=e.value.substring(0,e.value.length-1),currentOperations.pop(),currentOperationsForView.pop()},printResult=e=>{try{return showResult.textContent=math.evaluate(e.value),!0}catch(t){console.error(t.name)}return!1},addSelectedOperation=(e,t)=>{showOp.textContent+=e,resultsCalc.value+=t,currentOperations.push(t),currentOperationsForView.push(e)},evaluate=()=>{document.addEventListener("click",e=>{let t=e.target;if("BUTTON"===t.tagName&&equalsAvailable){let a=t.value.trim();switch(!0){case"equal"===a:printResult(resultsCalc)||(showResult.textContent="Error de sintaxis");break;case"clear"===a:cleanValues();break;case"del"===a:backspace(resultsCalc),resultsCalc.value="",currentOperations.forEach(e=>{resultsCalc.value+=e}),showOp.textContent="",currentOperationsForView.forEach(e=>{showOp.textContent+=e});break;case"m+"===a:saveValueForANS(showResult.textContent);break;case"ans"===a:void 0!==getANSValue()&&null!==getANSValue()&&(showOp.textContent+=getANSValue(),resultsCalc.value=showOp.textContent,currentOperations.push(getANSValue()),currentOperationsForView.push(getANSValue()));break;case"pi"===a:showOp.textContent+=math.pi,resultsCalc.value=showOp.textContent,currentOperations.push("pi"),currentOperationsForView.push(math.pi);break;case"ln"===a:addSelectedOperation(a+"(","log(e, ");break;case"log"===a:addSelectedOperation(a+"(","log10(");break;case"XX"===a:addSelectedOperation(String.fromCodePoint(178),"^(2)");break;case"XXX"===a:addSelectedOperation(String.fromCodePoint(179),"^(3)");break;case a===String.fromCodePoint(8730):addSelectedOperation(a+"(","sqrt(");break;case"exp"===a:addSelectedOperation(a+"(","exp(");break;case"fact"===a:addSelectedOperation(a+"(","factorial(");break;default:addToDisplay(resultsCalc,t.value),""!==t.value&&(currentOperations.push(t.value),currentOperationsForView.push(t.value))}}})};window.onload=()=>evaluate();